{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nconst UseForm = (initialData, onValidate) => {\n  _s();\n  /*\n  contiene toda la informacion del formulario se inicia con el parametro\n  initialData para poder usarlo en otro formulario que se pueda creear despues\n  */\n  const [form, setForm] = useState(initialData);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  //funcion para cuando hayan cambios\n  const handleChange = e => {\n    setForm({\n      ...form,\n      //el contenido de la variable form agrega lo ingresado\n      [e.target.name]: e.target.value // edita la propiedad de name y le agrega el valor value\n    });\n  };\n\n  //funcion para cuando se envia el formulario\n  const handleSubmit = e => {\n    e.preventDefault(); //evita que la pagina se refresque \n    const err = onValidate(form); //recibe el objeto de errors y lo guarda en err\n    setErrors(err); //se setea la variable de errores\n\n    console.log(Object.keys(err).length);\n    if (Object.keys(err).length === 0) {\n      //valida si el objeto esta vacio o no\n      setLoading(true);\n      fetch(\"https://formsubmit.co/ajax/franciscoandreslagos@gmail.com\", {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(form) //conviete a texto lo que contenga el formulario\n      }).then(Response => Response.json()) // espera la respuesta y se parsea a json  \n      .then(data => {\n        console.log(data); //imprime por consola la informacion\n        data.success === \"true\" && setForm(initialData); //formulario vuelve al estado inicial\n        setLoading(false); //setLoading pasa a false\n      }).catch(error => {\n        console.log(error);\n        setLoading(false);\n      }); // si hay un error lo escribe en consola\n    }\n  };\n\n  //retorna estas variables para poder usarlas en el formulario\n  return {\n    form,\n    errors,\n    loading,\n    handleChange,\n    handleSubmit\n  };\n};\n_s(UseForm, \"GcC/OSj6hvpeFhB9sLxEtbbTVcI=\");\n_c = UseForm;\nexport default UseForm;\nvar _c;\n$RefreshReg$(_c, \"UseForm\");","map":{"version":3,"names":["useState","UseForm","initialData","onValidate","form","setForm","loading","setLoading","errors","setErrors","handleChange","e","target","name","value","handleSubmit","preventDefault","err","console","log","Object","keys","length","fetch","method","headers","body","JSON","stringify","then","Response","json","data","success","catch","error"],"sources":["/home/revvitx/workspace/formulario-ract/src/components/UseForm.jsx"],"sourcesContent":["import { useState } from \"react\";\n\nconst UseForm = (initialData, onValidate) => { \n    \n    /*\n    contiene toda la informacion del formulario se inicia con el parametro\n    initialData para poder usarlo en otro formulario que se pueda creear despues\n    */\n    const [form, setForm] = useState(initialData);\n\n\n    const [loading, setLoading] = useState(false);\n\n    const [errors, setErrors] = useState({});\n\n    //funcion para cuando hayan cambios\n    const handleChange = (e) => {\n        setForm({\n            ...form,        //el contenido de la variable form agrega lo ingresado\n            [e.target.name] : e.target.value    // edita la propiedad de name y le agrega el valor value\n        })\n    };\n    \n    //funcion para cuando se envia el formulario\n    const handleSubmit = (e) => {\n        e.preventDefault();      //evita que la pagina se refresque \n        const err = onValidate(form)   //recibe el objeto de errors y lo guarda en err\n        setErrors(err)                  //se setea la variable de errores\n        \n        console.log(Object.keys(err).length);\n        \n        if(Object.keys(err).length === 0){     //valida si el objeto esta vacio o no\n            setLoading(true)\n            fetch(\"https://formsubmit.co/ajax/franciscoandreslagos@gmail.com\",{\n                method: 'POST',\n                headers: {\n                    'Content-type': 'application/json',\n                    'Accept': 'application/json',\n                },\n                body: JSON.stringify(form)      //conviete a texto lo que contenga el formulario\n            })\n            .then(Response => Response.json())       // espera la respuesta y se parsea a json  \n            .then(data => {\n                console.log(data)       //imprime por consola la informacion\n                data.success === \"true\" && setForm(initialData)    //formulario vuelve al estado inicial\n                setLoading(false)       //setLoading pasa a false\n            })         \n            .catch(error => {\n                console.log(error)\n                setLoading(false)\n            });    // si hay un error lo escribe en consola\n        }\n    };\n\n    //retorna estas variables para poder usarlas en el formulario\n    return {form, errors,loading,handleChange, handleSubmit}\n\n    \n}\n \nexport default UseForm;"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,MAAMC,OAAO,GAAG,CAACC,WAAW,EAAEC,UAAU,KAAK;EAAA;EAEzC;AACJ;AACA;AACA;EACI,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAACE,WAAW,CAAC;EAG7C,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAExC;EACA,MAAMU,YAAY,GAAIC,CAAC,IAAK;IACxBN,OAAO,CAAC;MACJ,GAAGD,IAAI;MAAS;MAChB,CAACO,CAAC,CAACC,MAAM,CAACC,IAAI,GAAIF,CAAC,CAACC,MAAM,CAACE,KAAK,CAAI;IACxC,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMC,YAAY,GAAIJ,CAAC,IAAK;IACxBA,CAAC,CAACK,cAAc,EAAE,CAAC,CAAM;IACzB,MAAMC,GAAG,GAAGd,UAAU,CAACC,IAAI,CAAC,EAAG;IAC/BK,SAAS,CAACQ,GAAG,CAAC,EAAkB;;IAEhCC,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACJ,GAAG,CAAC,CAACK,MAAM,CAAC;IAEpC,IAAGF,MAAM,CAACC,IAAI,CAACJ,GAAG,CAAC,CAACK,MAAM,KAAK,CAAC,EAAC;MAAM;MACnCf,UAAU,CAAC,IAAI,CAAC;MAChBgB,KAAK,CAAC,2DAA2D,EAAC;QAC9DC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,QAAQ,EAAE;QACd,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACxB,IAAI,CAAC,CAAM;MACpC,CAAC,CAAC,CACDyB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CAAO;MAAA,CACxCF,IAAI,CAACG,IAAI,IAAI;QACVd,OAAO,CAACC,GAAG,CAACa,IAAI,CAAC,EAAO;QACxBA,IAAI,CAACC,OAAO,KAAK,MAAM,IAAI5B,OAAO,CAACH,WAAW,CAAC,EAAI;QACnDK,UAAU,CAAC,KAAK,CAAC,EAAO;MAC5B,CAAC,CAAC,CACD2B,KAAK,CAACC,KAAK,IAAI;QACZjB,OAAO,CAACC,GAAG,CAACgB,KAAK,CAAC;QAClB5B,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC,CAAC,CAAI;IACX;EACJ,CAAC;;EAED;EACA,OAAO;IAACH,IAAI;IAAEI,MAAM;IAACF,OAAO;IAACI,YAAY;IAAEK;EAAY,CAAC;AAG5D,CAAC;AAAA,GAxDKd,OAAO;AAAA,KAAPA,OAAO;AA0Db,eAAeA,OAAO;AAAC;AAAA"},"metadata":{},"sourceType":"module"}